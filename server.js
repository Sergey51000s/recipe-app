const express = require('express');
const cors = require('cors');
const path = require('path');
const app = express();

app.use(cors());
app.use(express.static(path.join(__dirname, 'public')));

const dishes = {
  Салаты: {
    'Греческий': 'Помидоры, огурцы, перец болгарский, лук красный, сыр фета, маслины, оливки, оливковое масло, лимон',
    'Цезарь с курицей': 'Куриное филе, салат Айсберг, сухарики из белого хлеба, сыр Пармезан, яйцо перепелиное, соус Цезарь, помидоры Черри, соль, перец',
    'Цезарь с креветками': 'Салат Айсберг, сыр Пармезан, сухарики из белого хлеба, соус Цезарь, помидоры черри, креветки тигровые, масло подсолнечное, яйцо перепелиное, соль, перец'
  },
  Супы: {
    'Куриный': 'Курица, лапша яичная, морковь, лук репчатый, бульон готовый куриный, вода, зелень, яйцо куриное, соль, перец',
    'Грибной крем-суп': 'Шампиньоны, картофель, лук репчатый, сливки 20%, масло сливочное, чеснок, сухари из белого хлеба, куриный бульон, мука пшеничная',
    'Том Ям': 'Паста Том Ям, куриный бульон, креветки тигровые, кальмар очищенный, мидии очищенные, шампиньоны, помидоры черри, кокосовое молоко, рис'
  },
  Горячее: {
    'Стейк из сёмги с картофельным пюре': 'Лосось (стейк), лимон, оливковое масло, специи, картофель, сливочное масло, соль',
    'Куриная котлета с картофельным пюре': 'Фарш куриный, лук репчатый, хлеб, молоко, яйцо, масло растительное, картофель, масло сливочное',
    'Бургер с говядиной и картошкой фри': 'Булочки для гамбургера с кунжутом, котлета говяжья п/ф, сыр Чеддер, помидор свежий, лук красный, огурец соленый, салат Айсберг, бекон, соус Бургер готовый, масло растительное, соль/перец, картофель фри с/м'
  },
  Паста: {
    'Карбонара': 'Спагетти, бекон, яичный желток, сыр Пармезан, чеснок, свежемолотый черный перец, соль поваренная пищевая',
    'Фетучини с курицей и грибами': 'Паста фетучини, филе куриное, шампиньоны свежие, сливки 20%, лук репчатый, чеснок, масло растительное, сыр Пармезан, соль пищевая, перец душистый свежемолотый',
    'Фарфале с сёмгой': 'Паста фарфалле, филе семги, сливки 20%, шпинат свежий, чеснок, лук репчатый, лимон, сыр Пармезан, оливковое масло, соль, перец',
    'Паста с креветками': 'Спагетти, креветки очищенные, чеснок, оливковое масло, белое вино сухое, сливки 20%, лимон, Пармезан (тертый), петрушка, соль пищевая'
  },
  Закуски: {
    'Сырные палочки с брусничным соусом': 'Сырные палочки с/м, масло д/фритюра, соус брусничный готовый',
    'Картошка фри': 'Картофель фри с/м, масло д/фритюра, трюфельное масло, соль, соус',
    'Стрипсы куриные с соусом барбекю': 'Стрипсы с/м, масло д/фритюра, соус барбекю готовый, лимон',
    'Нагетсы куриные с сырным соусом': 'Нагеттсы с/м, масло д/фритюра, соус сырный готовый, лимон',
    'Креветки темпура с соусом терияки': 'Креветки тигровые, мука темпура, ледяная вода, яйцо охлажденное, масло д/фритюра, соль, соус терияки'
  }
};

app.get('/api/dishes/:category/:dish', (req, res) => {
  const { category, dish } = req.params;
  if (dishes[category] && dishes[category][dish]) {
    res.json({ ingredients: dishes[category][dish] });
  } else {
    res.status(404).json({ error: 'Блюдо не найдено' });
  }
});

const port = process.env.PORT || 3000;
app.listen(port, () => {
  console.log(`Сервер запущен на порту ${port}`);
});